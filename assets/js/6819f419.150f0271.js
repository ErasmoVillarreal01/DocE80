"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[7115],{8453:(e,s,r)=>{r.d(s,{R:()=>l,x:()=>a});var t=r(6540);const n={},i=t.createContext(n);function l(e){const s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),t.createElement(i.Provider,{value:s},e.children)}},9743:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"Utilities/Scripts/Messages/HostMessages/RET_CNL","title":"RET_CNL - Retrieval Cancel","description":"Overview","source":"@site/docs/Utilities/Scripts/Messages/HostMessages/RET_CNL.md","sourceDirName":"Utilities/Scripts/Messages/HostMessages","slug":"/Utilities/Scripts/Messages/HostMessages/RET_CNL","permalink":"/DocE80/docs/Utilities/Scripts/Messages/HostMessages/RET_CNL","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"sql","permalink":"/DocE80/docs/tags/sql"},{"inline":true,"label":"message-processing","permalink":"/DocE80/docs/tags/message-processing"},{"inline":true,"label":"scripts","permalink":"/DocE80/docs/tags/scripts"},{"inline":true,"label":"sdm","permalink":"/DocE80/docs/tags/sdm"},{"inline":true,"label":"host-messages","permalink":"/DocE80/docs/tags/host-messages"}],"version":"current","frontMatter":{"title":"RET_CNL - Retrieval Cancel","tags":["sql","message-processing","scripts","sdm","host-messages"]},"sidebar":"techStack","previous":{"title":"ITM_MST - Item Master","permalink":"/DocE80/docs/Utilities/Scripts/Messages/HostMessages/ITM_MST"},"next":{"title":"RET_RQS - Retrieval Request","permalink":"/DocE80/docs/Utilities/Scripts/Messages/HostMessages/RET_RQS"}}');var n=r(4848),i=r(8453);const l={title:"RET_CNL - Retrieval Cancel",tags:["sql","message-processing","scripts","sdm","host-messages"]},a=void 0,c={},o=[{value:"Overview",id:"overview",level:2},{value:"Trigger",id:"trigger",level:2},{value:"Expected Behavior",id:"expected-behavior",level:2},{value:"Example: Processing a <code>RET_CNL</code> Message",id:"example-processing-a-ret_cnl-message",level:2},{value:"XML Example",id:"xml-example",level:2}];function d(e){const s={br:"br",code:"code",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Source:"})," ",(0,n.jsx)(s.code,{children:"HOST"}),(0,n.jsx)(s.br,{}),"\n",(0,n.jsx)(s.strong,{children:"Destination:"})," ",(0,n.jsx)(s.code,{children:"SDM"})]}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"RET_CNL"})," (Retrieval Cancel) message is sent by the ",(0,n.jsx)(s.strong,{children:"HOST system"})," to instruct SDM to cancel an existing retrieval request. This typically happens when a shipment update removes a unit previously requested or when a pending retrieval request must be explicitly deleted."]}),"\n",(0,n.jsx)(s.h2,{id:"trigger",children:"Trigger"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Shipment update:"}),(0,n.jsx)(s.br,{}),"\n","A unit previously included in the shipment request is removed."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Deletion of an active retrieval request:"}),(0,n.jsx)(s.br,{}),"\n","The request still exists in the ",(0,n.jsx)(s.code,{children:"TransportOrder"})," list and must be cancelled."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"expected-behavior",children:"Expected Behavior"}),"\n",(0,n.jsxs)(s.p,{children:["Upon receiving a ",(0,n.jsx)(s.code,{children:"RET_CNL"})," message:"]}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["SDM ",(0,n.jsx)(s.strong,{children:"deletes the retrieval request"})," linked to the specified retrieval number."]}),"\n",(0,n.jsxs)(s.li,{children:["SDM ",(0,n.jsx)(s.strong,{children:"updates the shipment"})," with the details included in the XML message (if provided)."]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"example-processing-a-ret_cnl-message",children:["Example: Processing a ",(0,n.jsx)(s.code,{children:"RET_CNL"})," Message"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-sql",metastring:'title="Simulate RET_CNL processing"',children:"SET TRANSACTION ISOLATION LEVEL READ COMMITTED\r\nDECLARE\t@return_value Int,\r\n\t\t@XmlReplyMessage xml,\r\n\t\t@ResultCode INT,\r\n\t\t@ResultText NVARCHAR(max)\r\n\r\n\r\nbegin tran\r\n\r\n\r\n\r\n\r\nEXEC\t@return_value = [Integration].[usp_ProcessHostMessage_RET_CNL]\r\n\t\t@XmlMessage = N'<Document>\r\n  <Header>\r\n    <Sender>HOST</Sender>\r\n    <Receiver>E80</Receiver>\r\n    <SendDate>2025-10-10 18:05:38</SendDate>\r\n    <MessageType>RET_CNL</MessageType>\r\n    <MessageId>12345</MessageId>\r\n  </Header>\r\n  <Body>\r\n    <RetrievalRequestNumber>1213</RetrievalRequestNumber>\r\n  </Body>\r\n</Document>\r\n',\r\n\r\n\r\n\t\t@XmlReplyMessage = @XmlReplyMessage OUTPUT,\r\n\t\t@ResultCode = @ResultCode OUT,\r\n\t\t@ResultText = @ResultText OUT\r\n\r\nSELECT\t@XmlReplyMessage as N'@XmlReplyMessage'\r\n\r\nSELECT\t@return_value as 'Return Value', @ResultCode ResultCode, @ResultText ResultText\r\n\r\n\r\n\r\nselect 'Shipment', * from Shipping.Shipment\r\nselect 'Delivery', * from Shipping.Delivery\r\nselect 'DeliveryItem', * from Shipping.DeliveryItem\r\nselect 'TransportOrder', Id_Shipment, * from Handling.TransportOrder\r\n\r\nROLLBACK tran\r\n\n"})}),"\n",(0,n.jsx)(s.h2,{id:"xml-example",children:"XML Example"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-xml",metastring:'title="RET_CNL xml template"',children:"<Document>\r\n  <Header>\r\n    <Sender>HOST</Sender>\r\n    <Receiver>E80</Receiver>\r\n    <SendDate>2012-09-12 18:05:38+02.00</SendDate>\r\n    <MessageType>RET_CNL</MessageType>\r\n    <MessageId>12345</MessageId>\r\n  </Header>\r\n  <Body>\r\n    <RetrievalRequestNumber>121344112</RetrievalRequestNumber>\r\n    <ShipmentNumber>012223</ShipmentNumber>\r\n    <ShipmentExpectedUnits>10</ShipmentExpectedUnits>\r\n  </Body>\r\n</Document>\r\n\n"})})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);