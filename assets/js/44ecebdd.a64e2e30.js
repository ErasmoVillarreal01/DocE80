"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[5862],{381:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>p,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"Utilities/Scripts/Messages/Shipping/ShipmentMonitorProcess","title":"Shipment Process","description":"Overview","source":"@site/docs/Utilities/Scripts/Messages/Shipping/ShipmentMonitorProcess.md","sourceDirName":"Utilities/Scripts/Messages/Shipping","slug":"/Utilities/Scripts/Messages/Shipping/ShipmentMonitorProcess","permalink":"/DocE80/docs/Utilities/Scripts/Messages/Shipping/ShipmentMonitorProcess","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"sql","permalink":"/DocE80/docs/tags/sql"},{"inline":true,"label":"message-processing","permalink":"/DocE80/docs/tags/message-processing"},{"inline":true,"label":"scripts","permalink":"/DocE80/docs/tags/scripts"},{"inline":true,"label":"sdm","permalink":"/DocE80/docs/tags/sdm"},{"inline":true,"label":"shipping","permalink":"/DocE80/docs/tags/shipping"}],"version":"current","frontMatter":{"title":"Shipment Process","tags":["sql","message-processing","scripts","sdm","shipping"]},"sidebar":"techStack","previous":{"title":"Shipment Process","permalink":"/DocE80/docs/Utilities/Scripts/Messages/Shipping/ShipmentFromAMIS"},"next":{"title":"Shipment Processing Scripts","permalink":"/DocE80/docs/Utilities/Scripts/Messages/Shipping/intro"}}');var t=s(4848),i=s(8453);const o={title:"Shipment Process",tags:["sql","message-processing","scripts","sdm","shipping"]},p=void 0,a={},l=[{value:"Overview",id:"overview",level:2},{value:"Example: Simulating mission process",id:"example-simulating-mission-process",level:2}];function c(e){const n={code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"This script simulates the complete life cycle of a shipment after its creation, sequentially progressing through each shipment status. It includes the activation of the shipment, the generation of the required transport orders, and the execution of those orders until the shipment is fully completed."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"example-simulating-mission-process",children:"Example: Simulating mission process"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",metastring:'title="Shipment monitor process"',children:"\r\nbegin tran\r\n\r\nselect 'before monitor', * from Shipping.Shipment\r\n\r\nDECLARE @RC int\r\nDECLARE @AMISMessages xml\r\nDECLARE @SendMessages bit\r\nDECLARE\t@return_value Int,\r\n\t\t@XmlReplyMessage xml,\r\n\t\t@ResultCode INT,\r\n\t\t@ResultText NVARCHAR(max)\r\n\r\n\r\nEXECUTE @RC = [Shipping].[usp_OutboundShipmentMonitorProcess] \r\nEXECUTE @RC = [Shipping].[usp_OutboundShipmentMonitorProcess] \r\nEXECUTE @RC = [Shipping].[usp_OutboundShipmentMonitorProcess] \r\nEXECUTE @RC = [Shipping].[usp_OutboundShipmentMonitorProcess] \r\n\r\n\r\nEXEC\t@return_value = [Integration].[usp_ProcessHostMessage_SHP_CTRL]\r\n\t\t@XmlMessage = N'<Document>\r\n  <Header>\r\n    <Sender>HOST</Sender>\r\n    <Receiver>E80</Receiver>\r\n    <SendDate>2023-09-12T18:05:38+02:00</SendDate>\r\n    <MessageType>SHP_CTRL</MessageType>\r\n    <MessageId>12345</MessageId>\r\n  </Header>\r\n  <Body>\r\n    <ShipmentNumber>202505261107</ShipmentNumber>\r\n    <Priority>10</Priority>\r\n    <DueDatetime>2023-09-30 20:00:00+02:00</DueDatetime>\r\n    <ControlCode>Activate</ControlCode>\r\n  </Body>\r\n</Document>\r\n',\r\n\r\n\r\n\t\t@XmlReplyMessage = @XmlReplyMessage OUTPUT,\r\n\t\t@ResultCode = @ResultCode OUT,\r\n\t\t@ResultText = @ResultText OUT\r\n\r\nSELECT\t@XmlReplyMessage as N'@XmlReplyMessage'\r\n\r\nSELECT\t@return_value as 'Return Value', @ResultCode ResultCode, @ResultText ResultText\r\n\r\n\r\nselect * from Shipping.Shipment\r\n\r\n\r\n\r\n-- TODO: Set parameter values here.\r\nset @SendMessages = 'true'\r\n\r\nEXECUTE @RC = [Handling].[usp_ReleaseTransportOrders] \r\n   @AMISMessages OUTPUT\r\n  ,@SendMessages\r\n  ,@ResultCode OUTPUT\r\n  ,@ResultText OUTPUT\r\n\r\n\r\nEXECUTE @RC = [Handling].[usp_ReleaseTransportOrders] \r\n   @AMISMessages OUTPUT\r\n  ,@SendMessages\r\n  ,@ResultCode OUTPUT\r\n  ,@ResultText OUTPUT\r\n\r\n\r\nEXECUTE @RC = [Shipping].[usp_OutboundShipmentMonitorProcess] \r\n\r\nselect 'debug 2', * from Shipping.Shipment\r\n\r\n\r\nEXECUTE @RC = [Handling].[usp_ReleaseTransportOrders] \r\n   @AMISMessages OUTPUT\r\n  ,@SendMessages\r\n  ,@ResultCode OUTPUT\r\n  ,@ResultText OUTPUT\r\n\r\n\r\nEXECUTE @RC = [Shipping].[usp_OutboundShipmentMonitorProcess] \r\n\r\n\r\nselect 'debug 3', * from Shipping.Shipment\r\n\r\n\r\n\r\nEXECUTE @RC = [Handling].[usp_ReleaseTransportOrders] \r\n   @AMISMessages OUTPUT\r\n  ,@SendMessages\r\n  ,@ResultCode OUTPUT\r\n  ,@ResultText OUTPUT\r\n\r\n\r\nselect 'after monitor', * from Shipping.Shipment\r\n\r\nselect 'TOs', * from HAndling.TransportOrder\r\n\r\n\r\nSELECT 'LGVM OutgoingMessages', * FROM Lgvm.OutgoingMessage\r\nSELECT top 100 'HostOutgoingMessage', * FROM Integration.HostOutgoingMessage order by InsertDateTime desc\r\n\r\n\r\n\r\nrollback tran\r\n\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>p});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function p(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);