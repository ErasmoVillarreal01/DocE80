"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[6997],{338:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/restore5-c9e2717cb1cc40dfd4e9e12fcd8643f6.png"},1467:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/restore4-25e55f52bc54b9984176a909b67cfb72.png"},3175:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/restore3-6518aa6e2104fc3de5493f4689077868.png"},3357:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/sdmrole-94114ed4d3fc3048edb5dfb2ea99bed0.png"},3601:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"Utilities/Create a Backup","title":"Backup","description":"Create a Backup","source":"@site/docs/Utilities/Create a Backup.md","sourceDirName":"Utilities","slug":"/Utilities/Create a Backup","permalink":"/DocE80/docs/Utilities/Create a Backup","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"techStack","previous":{"title":"Version Control Repository","permalink":"/DocE80/docs/Utilities/Commit to Devops"},"next":{"title":"Schema & Data Compare","permalink":"/DocE80/docs/Utilities/Data Compare"}}');var r=s(4848),a=s(8453);const i={},c="Backup",o={},d=[{value:"Create a Backup",id:"create-a-backup",level:2},{value:"Primary and secondary backups",id:"primary-and-secondary-backups",level:2},{value:"To restore the backup",id:"to-restore-the-backup",level:2}];function l(e){const t={h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"backup",children:"Backup"})}),"\n",(0,r.jsx)(t.h2,{id:"create-a-backup",children:"Create a Backup"}),"\n",(0,r.jsx)(t.p,{children:"For SDM there is a procedure called"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Mainteance.usp_CreateDatabaseBackupJobs:"})," this creates the jobs to call the ",(0,r.jsx)(t.strong,{children:"Maintenance.usp_ExecuteDatabseBackup_Job:"})," this saves the backups.\r\nThere is a backup folder located on where you state on the ApplicationSettings table."]}),"\n",(0,r.jsx)(t.p,{children:"You need to have this in order for the backups to work:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"SQL Server Agent"}),"\n",(0,r.jsx)(t.li,{children:"Jobs"}),"\n",(0,r.jsx)(t.li,{children:"SDM_DBBackup"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"primary-and-secondary-backups",children:"Primary and secondary backups"}),"\n",(0,r.jsx)(t.p,{children:"Primary and secondary backups"}),"\n",(0,r.jsx)(t.p,{children:"We need to know what machine we are using in order to do the backup for that machine, because if not we get an error."}),"\n",(0,r.jsx)(t.p,{children:"We have 2 machines exactly the same,"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Fail Over",src:s(9293).A+"",width:"1112",height:"588"})}),"\n",(0,r.jsx)(t.p,{children:"For the LgvM to know to which IP address it should connect to, we have a virtual IP address, and it is just redirected to the machine that is working."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"SDM Role",src:s(3357).A+"",width:"643",height:"295"})}),"\n",(0,r.jsx)(t.p,{children:"If you want to restore something:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Full backup every day"}),"\n",(0,r.jsx)(t.li,{children:"Diff backup every hour"}),"\n",(0,r.jsx)(t.li,{children:"Log backup every 10 min"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Like you did a pkup and it supposedly sent it somewhere, but we want to check more."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"PKUP Example",src:s(7377).A+"",width:"1211",height:"388"})}),"\n",(0,r.jsx)(t.h2,{id:"to-restore-the-backup",children:"To restore the backup"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Open SQL"}),"\n",(0,r.jsx)(t.li,{children:"Right click on the database you want to restore, click restore"}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{alt:"restore1",src:s(5446).A+"",width:"1017",height:"341"}),"\r\n3. Select the .bak on the folder you saved them"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"restore2",src:s(6685).A+"",width:"903",height:"764"})}),"\n",(0,r.jsxs)(t.ol,{start:"4",children:["\n",(0,r.jsx)(t.li,{children:"Select  the timeline, and select the time where you want to restore it to."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"restore3",src:s(3175).A+"",width:"1277",height:"745"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"restore4",src:s(1467).A+"",width:"1281",height:"743"})}),"\n",(0,r.jsx)(t.p,{children:"(Generate the script -> you can add the miliseconds there)"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"restore5",src:s(338).A+"",width:"315",height:"125"})}),"\n",(0,r.jsx)(t.p,{children:'If you get a warning then deselect "Take tail-log\u2026"'}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"restore6",src:s(8521).A+"",width:"873",height:"740"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},5446:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/restore1-14bda1a90cf8555da0b073499f7acd3f.png"},6685:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/restore2-72841e40f83c03f0e531dd737f54a2b3.png"},7377:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/pkupexample-6bed011830b5611b672e62d7f9b6f802.png"},8453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>c});var n=s(6540);const r={},a=n.createContext(r);function i(e){const t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(a.Provider,{value:t},e.children)}},8521:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/restore6-b21d711a5bf85868a7351a3fa6b73b15.png"},9293:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/failover-b24342fc9ee241710b545b9019671c59.png"}}]);