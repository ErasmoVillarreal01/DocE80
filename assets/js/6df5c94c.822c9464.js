"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[2693],{502:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"Utilities/Data Compare","title":"Schema & Data Compare","description":"\ud83d\udcca Data Compare","source":"@site/docs/Utilities/Data Compare.md","sourceDirName":"Utilities","slug":"/Utilities/Data Compare","permalink":"/DocE80/docs/Utilities/Data Compare","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"techStack","previous":{"title":"Backup","permalink":"/DocE80/docs/Utilities/Create a Backup"},"next":{"title":"Scripts","permalink":"/DocE80/docs/category/scripts-2"}}');var t=s(4848),i=s(8453);const a={},d="Schema & Data Compare",c={},o=[{value:"\ud83d\udcca Data Compare",id:"-data-compare",level:2},{value:"Recommended Steps",id:"recommended-steps",level:3},{value:"\ud83c\udfd7\ufe0f Schema Compare",id:"\ufe0f-schema-compare",level:2},{value:"Recommended Steps",id:"recommended-steps-1",level:3},{value:"\ud83d\udd04 Data Compare (with backups)",id:"-data-compare-with-backups",level:2},{value:"Recommended Steps",id:"recommended-steps-2",level:3},{value:"\u2705 Best Practices",id:"-best-practices",level:2},{value:"\ud83d\udccc Schema Compare vs. Data Compare",id:"-schema-compare-vs-data-compare",level:2}];function l(e){const n={br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"schema--data-compare",children:"Schema & Data Compare"})}),"\n",(0,t.jsx)(n.h2,{id:"-data-compare",children:"\ud83d\udcca Data Compare"}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.strong,{children:"Visual Studio"}),", the ",(0,t.jsx)(n.em,{children:"Data Compare"})," feature in ",(0,t.jsx)(n.strong,{children:"SQL Server Data Tools (SSDT)"})," allows you to compare and synchronize data (rows and values) between two SQL Server databases.",(0,t.jsx)(n.br,{}),"\n","It highlights differences and can generate scripts to update the target database."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Data Compare",src:s(8538).A+"",width:"1216",height:"698"})}),"\n",(0,t.jsx)(n.h3,{id:"recommended-steps",children:"Recommended Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Compare ",(0,t.jsx)(n.strong,{children:"only the tables"})," (views are not relevant since they just join tables)."]}),"\n",(0,t.jsxs)(n.li,{children:["In the filter, select these three options:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Different Records"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Only in source"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Only in target"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Import only configuration data."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Historical data ",(0,t.jsx)(n.strong,{children:"must not be imported"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The table ",(0,t.jsx)(n.strong,{children:"IDCONDITIONLOCATION"})," must not be imported; simply re\u2011trigger to regenerate it."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-schema-compare",children:"\ud83c\udfd7\ufe0f Schema Compare"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.em,{children:"Schema Compare"})," tool is used to synchronize the definition of objects (tables, procedures, functions, etc.) between a database and a SQL Server project."]}),"\n",(0,t.jsx)(n.h3,{id:"recommended-steps-1",children:"Recommended Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create a ",(0,t.jsx)(n.strong,{children:"new project"})," in Visual Studio."]}),"\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"SQL Server Database Project"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["In the solution, right\u2011click the project name (e.g., ",(0,t.jsx)(n.code,{children:"PEPSI_..."}),") \u2192 ",(0,t.jsx)(n.strong,{children:"Schema Compare"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Configure:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"From DB (PEPSI SDM) \u2192 To Solution"})," \u2192 Compare \u2192 Update."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["In ",(0,t.jsx)(n.strong,{children:"References"}),", add database references to ",(0,t.jsx)(n.code,{children:"master"})," and ",(0,t.jsx)(n.code,{children:"msdb"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Modify objects as needed (e.g., ",(0,t.jsx)(n.code,{children:"StockUnitInfo"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["Finally:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"From Solution \u2192 To DB"})," \u2192 Compare \u2192 Update."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-data-compare-with-backups",children:"\ud83d\udd04 Data Compare (with backups)"}),"\n",(0,t.jsx)(n.p,{children:"This workflow is used to compare data between environments (e.g., VM vs. production)."}),"\n",(0,t.jsx)(n.h3,{id:"recommended-steps-2",children:"Recommended Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Restore ",(0,t.jsx)(n.strong,{children:"backups"})," (SDM and LGVM from the E80 test server to Pepsi)."]}),"\n",(0,t.jsxs)(n.li,{children:["Create a ",(0,t.jsx)(n.strong,{children:"new SQL Server project"})," in Visual Studio."]}),"\n",(0,t.jsxs)(n.li,{children:["Run ",(0,t.jsx)(n.strong,{children:"Data Compare"})," between the VM database and the production database."]}),"\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"SQL Data Comparison"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Compare VM vs. production again."}),"\n",(0,t.jsxs)(n.li,{children:["In the results, select:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Different Records"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Only in source"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Only in target"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Finish the process.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Do not run Update"})," (this is for analysis only)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-best-practices",children:"\u2705 Best Practices"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Always validate changes in a test environment before applying them to production."}),"\n",(0,t.jsx)(n.li,{children:"Document differences found and objects modified."}),"\n",(0,t.jsx)(n.li,{children:"Avoid importing historical data or tables that are automatically regenerated."}),"\n",(0,t.jsxs)(n.li,{children:["Keep references (",(0,t.jsx)(n.code,{children:"master"}),", ",(0,t.jsx)(n.code,{children:"msdb"}),") updated to prevent compilation errors in the project."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-schema-compare-vs-data-compare",children:"\ud83d\udccc Schema Compare vs. Data Compare"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"Schema Compare"}),(0,t.jsx)(n.th,{children:"Data Compare"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Purpose"})}),(0,t.jsx)(n.td,{children:"Synchronize database objects (tables, views, procedures, functions, etc.)"}),(0,t.jsx)(n.td,{children:"Synchronize data (rows and values) between databases"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Scope"})}),(0,t.jsx)(n.td,{children:"Database structure / schema"}),(0,t.jsx)(n.td,{children:"Database content / records"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Use Case"})}),(0,t.jsx)(n.td,{children:"Align project schema with database or migrate schema changes"}),(0,t.jsx)(n.td,{children:"Identify and align differences in configuration data between environments"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Typical Workflow"})}),(0,t.jsx)(n.td,{children:"From DB \u2192 To Project \u2192 Update, then Project \u2192 To DB \u2192 Update"}),(0,t.jsx)(n.td,{children:"Compare source vs. target, select differences, import only configuration data"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Update Behavior"})}),(0,t.jsx)(n.td,{children:"Updates schema objects in target (tables, procedures, etc.)"}),(0,t.jsx)(n.td,{children:"Updates data in target (rows/values) \u2014 but often used for analysis only"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Caution"})}),(0,t.jsxs)(n.td,{children:["Ensure references (",(0,t.jsx)(n.code,{children:"master"}),", ",(0,t.jsx)(n.code,{children:"msdb"}),") are added to avoid errors"]}),(0,t.jsx)(n.td,{children:"Do not import historical data or auto\u2011generated tables (e.g., IDCONDITIONLOCATION)"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>d});var r=s(6540);const t={},i=r.createContext(t);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:n},e.children)}},8538:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/datacompare-035485e6b2c48ef09966442576427e96.png"}}]);