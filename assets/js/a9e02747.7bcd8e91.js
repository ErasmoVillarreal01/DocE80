"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[284],{2300:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Utilities/Scripts/Messages/HostMessages/RET_RQS","title":"RET_RQS - Retrieval Request","description":"Overview","source":"@site/docs/Utilities/Scripts/Messages/HostMessages/RET_RQS.md","sourceDirName":"Utilities/Scripts/Messages/HostMessages","slug":"/Utilities/Scripts/Messages/HostMessages/RET_RQS","permalink":"/DocE80/docs/Utilities/Scripts/Messages/HostMessages/RET_RQS","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"sql","permalink":"/DocE80/docs/tags/sql"},{"inline":true,"label":"message-processing","permalink":"/DocE80/docs/tags/message-processing"},{"inline":true,"label":"scripts","permalink":"/DocE80/docs/tags/scripts"},{"inline":true,"label":"sdm","permalink":"/DocE80/docs/tags/sdm"},{"inline":true,"label":"host-messages","permalink":"/DocE80/docs/tags/host-messages"}],"version":"current","frontMatter":{"title":"RET_RQS - Retrieval Request","tags":["sql","message-processing","scripts","sdm","host-messages"]},"sidebar":"techStack","previous":{"title":"RET_CNL - Retrieval Cancel","permalink":"/DocE80/docs/Utilities/Scripts/Messages/HostMessages/RET_CNL"},"next":{"title":"SHP_INS - Shipment Insert / Update","permalink":"/DocE80/docs/Utilities/Scripts/Messages/HostMessages/SHP_INS"}}');var t=s(4848),i=s(8453);const a={title:"RET_RQS - Retrieval Request",tags:["sql","message-processing","scripts","sdm","host-messages"]},l=void 0,o={},d=[{value:"Overview",id:"overview",level:2},{value:"Trigger",id:"trigger",level:2},{value:"Expected Behavior",id:"expected-behavior",level:2},{value:"Example: Processing a <code>RET_RQS</code> Message",id:"example-processing-a-ret_rqs-message",level:2},{value:"XML Example",id:"xml-example",level:2}];function c(e){const n={br:"br",code:"code",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source:"})," ",(0,t.jsx)(n.code,{children:"HOST"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Destination:"})," ",(0,t.jsx)(n.code,{children:"SDM"})]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"RET_RQS"})," (Retrieval Request) message is sent by the HOST system to request the retrieval of a unit from the warehouse. This can occur when a new shipment is created, when additional units are added to an existing shipment, or when a unit located anywhere in the warehouse is required. Upon receiving this message, SDM creates or updates the corresponding pick\u2011advice shipment (if applicable) and generates a retrieval transport order to move the requested unit to its destination. Internally, SDM adjusts transport orders through its retrieval\u2011request processing workflow."]}),"\n",(0,t.jsx)(n.h2,{id:"trigger",children:"Trigger"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"New shipment request:"}),(0,t.jsx)(n.br,{}),"\n","A shipment is created and requires a unit to be retrieved from storage."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Shipment update:"}),(0,t.jsx)(n.br,{}),"\n","An additional unit is added to an existing shipment, generating an additional retrieval request."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Unit requested elsewhere in the warehouse:"}),(0,t.jsx)(n.br,{}),"\n","A retrieval is required independently of shipment creation or update."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"expected-behavior",children:"Expected Behavior"}),"\n",(0,t.jsxs)(n.p,{children:["Upon receiving a ",(0,t.jsx)(n.code,{children:"RET_RQS"})," message:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["SDM ",(0,t.jsx)(n.strong,{children:"creates or updates the pick\u2011advice shipment"}),", depending on whether the shipment already exists."]}),"\n",(0,t.jsxs)(n.li,{children:["A ",(0,t.jsx)(n.strong,{children:"retrieval transport order is generated"})," to move the unit to the required destination."]}),"\n",(0,t.jsxs)(n.li,{children:["SDM invokes internal procedures to ensure correct processing:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Shipment creation or update via","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"[Shipping].[usp_ProcessShipmentCreationXml]"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"[Shipping].[usp_ProcessShipmentUpdateXml]"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Retrieval request handling via","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"[Handling].[usp_ProcessRetrievalRequestCreationXml]"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"All necessary transport\u2011order adjustments are executed to align system operations with the retrieval request."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"example-processing-a-ret_rqs-message",children:["Example: Processing a ",(0,t.jsx)(n.code,{children:"RET_RQS"})," Message"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",metastring:'title="Simulate RET_RQS processing"',children:"SET TRANSACTION ISOLATION LEVEL READ COMMITTED\r\nDECLARE\t@return_value Int,\r\n\t\t@XmlReplyMessage xml,\r\n\t\t@ResultCode INT,\r\n\t\t@ResultText NVARCHAR(max)\r\n\r\n\r\nbegin tran\r\n\r\nDECLARE @ROLLBACK\t\t\tBIT = 1\r\n\r\n\r\nEXEC\t@return_value = [Integration].[usp_ProcessHostMessage_RET_RQS]\r\n\t\t@XmlMessage = \r\n         N'<Document>\r\n            <Header>\r\n            <Sender>HOST</Sender>\r\n            <Receiver>E80</Receiver>\r\n            <SendDate>2026-01-08 12:05:38</SendDate>\r\n            <MessageType>RET_RQS</MessageType>\r\n            <MessageId>12345</MessageId>\r\n            </Header>\r\n            <Body>\r\n            <RetrievalRequestNumber>REPVTQ000ABC01</RetrievalRequestNumber>\r\n            <DeliveryNumber>REPLEN</DeliveryNumber>\r\n            <OrderType></OrderType>\r\n            <ShipmentNumber>REPLEN</ShipmentNumber>\r\n            <DestinationLocation>HQS101</DestinationLocation>\r\n            <Item>1010</Item>\r\n            <LPN></LPN>\r\n            <Lot></Lot>\r\n            <MinExpireDate></MinExpireDate>\r\n            <Quantity>60</Quantity>\r\n            <QAStatus></QAStatus>\r\n            </Body>\r\n        </Document>\r\n        ',\r\n\r\n\t\t@XmlReplyMessage = @XmlReplyMessage OUTPUT,\r\n\t\t@ResultCode = @ResultCode OUT,\r\n\t\t@ResultText = @ResultText OUT\r\n\r\n\r\n\r\n\r\nSELECT\t@XmlReplyMessage as N'@XmlReplyMessage'\r\n\r\nSELECT\t@return_value as 'Return Value', @ResultCode ResultCode, @ResultText ResultText\r\n\r\n\r\n\r\nselect 'Shipment', * from Shipping.Shipment\r\nselect 'Delivery', * from Shipping.Delivery\r\nselect 'DeliveryItem', * from Shipping.DeliveryItem\r\nselect TOP 1 'TransportOrder', Id_Shipment, * from Handling.TransportOrder ORDER BY InsertDateTime DESC\r\n--select 'Lot', * from Inventory.Lot order by Id desc\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nDECLARE @RC int\r\nDECLARE @AMISMessages xml\r\nDECLARE @SendMessages bit = 1\r\n--DECLARE @ResultCode int\r\n--DECLARE @ResultText nvarchar(max)\r\n\r\n\r\nEXECUTE @RC = [Handling].[usp_ReleaseTransportOrders] \r\n   @AMISMessages OUTPUT\r\n  ,@SendMessages\r\n  ,@ResultCode OUTPUT\r\n  ,@ResultText OUTPUT\r\n\r\n  select @AMISMessages [AMIS], @ResultCode [ResultCode], @ResultText [ResultText]\r\n\r\n\r\n  EXECUTE @RC = [Handling].[usp_ReleaseTransportOrders] \r\n   @AMISMessages OUTPUT\r\n  ,@SendMessages\r\n  ,@ResultCode OUTPUT\r\n  ,@ResultText OUTPUT\r\n\r\n  select @AMISMessages [AMIS], @ResultCode [ResultCode], @ResultText [ResultText]\r\n\r\n\r\n\r\nSELECT TOP 1 'TO', * FROM Handling.TransportOrder ORDER BY InsertDateTime DESC\r\nSELECT 'Lgvm OutMess', * FROM Lgvm.OutgoingMessage\r\n\r\n\r\nIF @ROLLBACK = 1\r\n\trollback\r\nELSE\r\n\tcommit\r\nGO\r\n\n"})}),"\n",(0,t.jsx)(n.h2,{id:"xml-example",children:"XML Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",metastring:'title="RET_RQS xml template"',children:"<Document>\r\n  <Header>\r\n    <Sender>HOST</Sender>\r\n    <Receiver>E80</Receiver>\r\n    <SendDate>2012-09-12 18:05:38+02.00</SendDate>\r\n    <MessageType>RET_RQS</MessageType>\r\n    <MessageId>12345</MessageId>\r\n  </Header>\r\n  <Body>\r\n    <RetrievalRequestNumber>121344112</RetrievalRequestNumber>\r\n    <ShipmentNumber>012223</ShipmentNumber>\r\n    <ShipmentExpectedUnits>10</ShipmentExpectedUnits>\r\n    <DeliverySequence>1</DeliverySequence>\r\n    <Destination>REP01</Destination>\r\n    <StagingArea>SL01</StagingArea>\r\n    <Dock>Dock1</Dock>\r\n    <Priority>012223</Priority>\r\n    <DueDateTime>2012-09-12 20:00:00+02:00</DueDateTime>\r\n    <Item>Itm01</Item>\r\n    <Quantity>20</Quantity>\r\n    <Lpn>20</Lpn>\r\n    <Lot>lot676</Lot>\r\n    <QualityStatus>AV</QualityStatus>\r\n    <MinExpireDate>2012-10-12</MinExpireDate>\r\n    <MaxExpireDate>2012-10-14</MaxExpireDate>\r\n  </Body>\r\n</Document>\r\n\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var r=s(6540);const t={},i=r.createContext(t);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);